@page "/admin/questions"
@using System.Net.Http.Json
@using KvizApp.Models
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize(Roles = "Admin")]

<h3>Manage Questions</h3>

<form @onsubmit="AddQuestion">
    <input type="text" @bind="NewQuestion.Text" placeholder="Enter question" />
    <button type="submit">Add Question</button>
</form>

<ul>
    @foreach (var question in questionsList)
    {
        <li>@question.Text</li>
    }
</ul>

@code {
    [Inject] private HttpClient Http { get; set; }
    private List<Question> questionsList = new();
    private Question NewQuestion = new();

    private async Task AddQuestion()
    {
        await Http.PostAsJsonAsync("api/questions", NewQuestion);
        questionsList.Add(NewQuestion);
        NewQuestion = new();
    }
}
